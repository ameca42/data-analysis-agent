# ğŸš€ æ•°æ®åˆ†æ Agent - å®Œæ•´å¯åŠ¨æŒ‡å—

ä¸€ä¸ªç°ä»£åŒ–çš„æ•°æ®åˆ†æå¹³å°ï¼Œæ”¯æŒæ–‡ä»¶ä¸Šä¼ ã€æ•°æ®è§£æå’Œæ™ºèƒ½åˆ†æã€‚

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®æ¶æ„](#é¡¹ç›®æ¶æ„)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [åŠŸèƒ½æ¼”ç¤º](#åŠŸèƒ½æ¼”ç¤º)
- [API æ–‡æ¡£](#api-æ–‡æ¡£)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

```
data-analysis-agent/
â”œâ”€â”€ backend/                 # FastAPI åç«¯
â”‚   â”œâ”€â”€ models/             # æ•°æ®åº“æ¨¡å‹
â”‚   â”œâ”€â”€ schemas/            # Pydantic schemas
â”‚   â”œâ”€â”€ routers/            # API è·¯ç”±
â”‚   â”œâ”€â”€ uploads/            # ä¸Šä¼ æ–‡ä»¶å­˜å‚¨ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
â”‚   â”œâ”€â”€ database.py         # æ•°æ®åº“é…ç½®
â”‚   â”œâ”€â”€ config.py           # åº”ç”¨é…ç½®
â”‚   â””â”€â”€ main.py             # åº”ç”¨å…¥å£
â”œâ”€â”€ frontend/               # React å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/     # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ App.jsx         # ä¸»åº”ç”¨
â”‚   â”‚   â””â”€â”€ api.js          # API æœåŠ¡
â”‚   â”œâ”€â”€ index.html
â”‚   â””â”€â”€ vite.config.js
â”œâ”€â”€ .env                    # ç¯å¢ƒå˜é‡é…ç½®
â”œâ”€â”€ requirements.txt        # Python ä¾èµ–
â””â”€â”€ README.md              # æœ¬æ–‡ä»¶
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Python 3.8+
- Node.js 16+
- npm æˆ– yarn

### 1ï¸âƒ£ åç«¯å¯åŠ¨

```bash
# å®‰è£… Python ä¾èµ–
pip install -r requirements.txt

# é…ç½®ç¯å¢ƒå˜é‡ï¼ˆ.env æ–‡ä»¶ï¼‰
# å·²ç»å­˜åœ¨ï¼Œç¡®ä¿é…ç½®æ­£ç¡®

# å¯åŠ¨åç«¯æœåŠ¡
uvicorn backend.main:app --reload

# åç«¯è¿è¡Œåœ¨: http://localhost:8000
# API æ–‡æ¡£: http://localhost:8000/docs
```

**åç«¯å¯åŠ¨æˆåŠŸæ ‡å¿—ï¼š**
```
INFO:     Uvicorn running on http://127.0.0.1:8000
INFO:     Application startup complete.
```

### 2ï¸âƒ£ å‰ç«¯å¯åŠ¨

```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# å‰ç«¯è¿è¡Œåœ¨: http://localhost:3000
```

**å‰ç«¯å¯åŠ¨æˆåŠŸæ ‡å¿—ï¼š**
```
  VITE v5.0.0  ready in 500 ms

  âœ  Local:   http://localhost:3000/
  âœ  Network: use --host to expose
```

### 3ï¸âƒ£ è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—®: **http://localhost:3000**

---

## ğŸ¯ åŠŸèƒ½æ¼”ç¤º

### ä¸Šä¼ æ–‡ä»¶

1. **æ‹–æ‹½ä¸Šä¼ **
   - å°†æ–‡ä»¶æ‹–æ‹½åˆ°ä¸Šä¼ åŒºåŸŸ
   - æ”¯æŒ CSV, Excel, JSON, Parquet

2. **ç‚¹å‡»ä¸Šä¼ **
   - ç‚¹å‡»ä¸Šä¼ åŒºåŸŸ
   - é€‰æ‹©æ–‡ä»¶
   - å¡«å†™æ•°æ®é›†ä¿¡æ¯

3. **æŸ¥çœ‹è¿›åº¦**
   - å®æ—¶æ˜¾ç¤ºä¸Šä¼ è¿›åº¦
   - ä¸Šä¼ æˆåŠŸåè‡ªåŠ¨åˆ·æ–°åˆ—è¡¨

### ç®¡ç†æ•°æ®é›†

1. **æŸ¥çœ‹åˆ—è¡¨**
   - ç½‘æ ¼å¸ƒå±€å±•ç¤ºæ‰€æœ‰æ•°æ®é›†
   - æ˜¾ç¤ºè¡Œæ•°ã€åˆ—æ•°ã€æ–‡ä»¶å¤§å°

2. **æŸ¥çœ‹è¯¦æƒ…**
   - ç‚¹å‡»"æŸ¥çœ‹è¯¦æƒ…"æŒ‰é’®
   - å¼¹å‡ºæ¨¡æ€æ¡†æ˜¾ç¤ºå®Œæ•´ä¿¡æ¯
   - Schema è¡¨æ ¼å±•ç¤ºåˆ—ä¿¡æ¯

3. **åˆ é™¤æ•°æ®é›†**
   - ç‚¹å‡»"åˆ é™¤"æŒ‰é’®
   - ç¡®è®¤ååˆ é™¤ï¼ˆè½¯åˆ é™¤ï¼‰

---

## ğŸ“š API æ–‡æ¡£

### ä¸Šä¼ æ–‡ä»¶

```http
POST /upload/
Content-Type: multipart/form-data

å‚æ•°:
- file: æ–‡ä»¶ï¼ˆå¿…éœ€ï¼‰
- name: æ•°æ®é›†åç§°ï¼ˆå¯é€‰ï¼‰
- description: æè¿°ï¼ˆå¯é€‰ï¼‰

å“åº”:
{
  "id": 1,
  "name": "æ•°æ®é›†åç§°",
  "row_count": 1000,
  "schema_json": [...]
}
```

### è·å–æ•°æ®é›†åˆ—è¡¨

```http
GET /upload/datasets?skip=0&limit=100

å“åº”: æ•°æ®é›†æ•°ç»„
```

### è·å–æ•°æ®é›†è¯¦æƒ…

```http
GET /upload/datasets/{dataset_id}

å“åº”: æ•°æ®é›†å¯¹è±¡
```

### åˆ é™¤æ•°æ®é›†

```http
DELETE /upload/datasets/{dataset_id}

å“åº”:
{
  "message": "æ•°æ®é›†å·²åˆ é™¤"
}
```

**å®Œæ•´ API æ–‡æ¡£**: http://localhost:8000/docs

---

## ğŸ¨ æŠ€æœ¯æ ˆ

### åç«¯
- **FastAPI** - ç°ä»£ Web æ¡†æ¶
- **SQLAlchemy** - ORM
- **Pandas** - æ•°æ®å¤„ç†
- **Pydantic** - æ•°æ®éªŒè¯
- **SQLite** - æ•°æ®åº“

### å‰ç«¯
- **React 18** - UI æ¡†æ¶
- **Vite** - æ„å»ºå·¥å…·
- **Axios** - HTTP å®¢æˆ·ç«¯
- **CSS3** - ç°ä»£æ ·å¼

---

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡ (.env)

```env
# LLM API é…ç½®
LLM_API_KEY=your_api_key_here
LLM_BASE_URL=https://api.openai.com/v1
LLM_MODEL_NAME=gpt-3.5-turbo

# æ•°æ®åº“
DATABASE_URL=sqlite:///./data.db

# æ–‡ä»¶ä¸Šä¼ 
UPLOAD_DIR=./backend/uploads
MAX_FILE_SIZE=10485760

# CORS
ALLOWED_ORIGINS=["http://localhost:3000", "http://127.0.0.1:3000"]
```

### æ•°æ®åº“

é¡¹ç›®ä½¿ç”¨ SQLiteï¼Œæ•°æ®åº“æ–‡ä»¶: `data.db`

æŸ¥çœ‹æ•°æ®ï¼š
```bash
sqlite3 data.db
.tables
SELECT * FROM datasets;
```

---

## â“ å¸¸è§é—®é¢˜

### 1. åç«¯å¯åŠ¨å¤±è´¥

**é—®é¢˜**: ModuleNotFoundError

**è§£å†³**:
```bash
pip install -r requirements.txt
```

### 2. å‰ç«¯è¿æ¥åç«¯å¤±è´¥

**é—®é¢˜**: CORS é”™è¯¯æˆ–ç½‘ç»œé”™è¯¯

**æ£€æŸ¥**:
- åç«¯æ˜¯å¦å¯åŠ¨ï¼ˆhttp://localhost:8000ï¼‰
- CORS é…ç½®æ˜¯å¦æ­£ç¡®
- é˜²ç«å¢™æ˜¯å¦é˜»æ­¢è¿æ¥

### 3. æ–‡ä»¶ä¸Šä¼ å¤±è´¥

**å¯èƒ½åŸå› **:
- æ–‡ä»¶ç±»å‹ä¸æ”¯æŒ
- æ–‡ä»¶å¤§å°è¶…è¿‡é™åˆ¶ï¼ˆé»˜è®¤ 10MBï¼‰
- uploads ç›®å½•æƒé™é—®é¢˜

**è§£å†³**:
```bash
# æ£€æŸ¥ uploads ç›®å½•
ls -la backend/uploads/

# åˆ›å»ºç›®å½•ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
mkdir -p backend/uploads
```

### 4. å‰ç«¯ä¾èµ–å®‰è£…å¤±è´¥

**é—®é¢˜**: npm install æŠ¥é”™

**è§£å†³**:
```bash
# æ¸…é™¤ç¼“å­˜
npm cache clean --force

# åˆ é™¤ node_modules
rm -rf node_modules package-lock.json

# é‡æ–°å®‰è£…
npm install
```

### 5. ç«¯å£è¢«å ç”¨

**åç«¯ç«¯å£å†²çª**:
```bash
# ä½¿ç”¨å…¶ä»–ç«¯å£
uvicorn backend.main:app --reload --port 8001
```

**å‰ç«¯ç«¯å£å†²çª**:
ä¿®æ”¹ `frontend/vite.config.js`:
```javascript
server: {
  port: 3001
}
```

---

## ğŸ“¸ æˆªå›¾é¢„è§ˆ

### æ–‡ä»¶ä¸Šä¼ ç•Œé¢
- æ‹–æ‹½ä¸Šä¼ åŒºåŸŸ
- ä¸Šä¼ è¿›åº¦æ¡
- è¡¨å•å¡«å†™

### æ•°æ®é›†åˆ—è¡¨
- ç½‘æ ¼å¡ç‰‡å¸ƒå±€
- ç»Ÿè®¡ä¿¡æ¯å±•ç¤º
- æ“ä½œæŒ‰é’®

### æ•°æ®é›†è¯¦æƒ…
- æ¨¡æ€æ¡†å¼¹çª—
- Schema è¡¨æ ¼
- ç»Ÿè®¡å¡ç‰‡

---

## ğŸ› ï¸ å¼€å‘å‘½ä»¤

### åç«¯

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆè‡ªåŠ¨é‡è½½ï¼‰
uvicorn backend.main:app --reload

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
uvicorn backend.main:app --host 0.0.0.0 --port 8000

# è¿è¡Œæµ‹è¯•
python test_upload.py

# åˆ›å»ºæ•°æ®åº“è¡¨
python -c "from backend.database import Base, engine; Base.metadata.create_all(engine)"
```

### å‰ç«¯

```bash
# å¼€å‘æ¨¡å¼
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# é¢„è§ˆç”Ÿäº§æ„å»º
npm run preview
```

---

## ğŸ“ æ•°æ®æ–‡ä»¶æ ¼å¼

### æ”¯æŒçš„æ ¼å¼

| æ ¼å¼ | æ‰©å±•å | ç¤ºä¾‹ |
|------|--------|------|
| CSV | .csv | data.csv |
| Excel | .xlsx, .xls | sales.xlsx |
| JSON | .json | records.json |
| Parquet | .parquet | data.parquet |

### ç¤ºä¾‹ CSV æ ¼å¼

```csv
id,name,age,salary
1,Alice,25,50000
2,Bob,30,60000
3,Charlie,35,75000
```

---

## ğŸ” å®‰å…¨æ€§

- âœ… æ–‡ä»¶ç±»å‹ç™½åå•éªŒè¯
- âœ… æ–‡ä»¶å¤§å°é™åˆ¶
- âœ… æ–‡ä»¶åå®‰å…¨å¤„ç†
- âœ… è½¯åˆ é™¤æœºåˆ¶
- âœ… CORS é…ç½®
- âš ï¸ å¾…æ·»åŠ : ç”¨æˆ·è®¤è¯
- âš ï¸ å¾…æ·»åŠ : æƒé™æ§åˆ¶

---

## ğŸš§ åç»­å¼€å‘è®¡åˆ’

- [ ] æ•°æ®é¢„è§ˆåŠŸèƒ½
- [ ] æ•°æ®æŸ¥è¯¢å’Œç­›é€‰
- [ ] AI æ™ºèƒ½åˆ†æ
- [ ] æ•°æ®å¯è§†åŒ–å›¾è¡¨
- [ ] ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- [ ] æ•°æ®å¯¼å‡ºåŠŸèƒ½
- [ ] æ‰¹é‡ä¸Šä¼ 
- [ ] æ•°æ®ç‰ˆæœ¬æ§åˆ¶

---

## ğŸ“„ è®¸å¯è¯

MIT License

---

## ğŸ‘¥ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æäº¤ Issue æˆ–è”ç³»å¼€å‘å›¢é˜Ÿã€‚

---

**ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼ğŸ‰**
